# Netlify build + functions config for PBX

[build]
  # Your React app lives under /frontend
  base = "frontend"
  command = "npm run build"
  publish = "build"

  # IMPORTANT: With base=frontend, this path is relative to /frontend
  # so Netlify packages functions from /frontend/netlify/functions
  functions = "netlify/functions"

[build.environment]
  # Secrets scanner: omit serverless source (reads process.env at runtime)
  # Also omit documentation files that contain example/placeholder credentials
  SECRETS_SCAN_OMIT_PATHS = "netlify/functions/**,*.md,**/*.md,NETLIFY_*.md"
  
  # IMPORTANT: Don't expose these in build (remove from build.environment)
  # These should ONLY be set in Netlify UI for functions to access at runtime
  # DO NOT list PLAID_* variables here as they will be bundled into client code

[functions]
  # Use esbuild for fast, Node 18+ compatible bundling
  node_bundler = "esbuild"
